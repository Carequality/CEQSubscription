{
  "resourceType": "StructureDefinition",
  "id": "CEQsubscription",
  "url": "https://sequoiaproject.org/fhir/sphd-r4/StructureDefinition/CEQsubscription",
  "version": "0.1.0",
  "name": "CEQsubscription",
  "title": "Carequality Subscription Profile",
  "status": "draft",
  "experimental": true,
  "publisher": "Carequality",
  "contact": [
    {
      "telecom": [
        {
          "system": "url",
          "value": "https://carequality.org/get-involved/technical-workgroup/"
        }
      ]
    },
    {
      "telecom": [
        {
          "system": "email",
          "value": "mailto:david.pyke@readycomputing.com"
        }
      ]
    }
  ],
  "description": "Extended Elements and Constraints Specific to the Carequality Use Case\nCarequality has defined a custom flow for a Subscription that removes the criteria use\nin favour of specific events defined as URIs.  This adds requirements that the PatientID\nand an identifier be added to the resource.  The identifier element is the endpoint id\n[Base]/fhir/Subscription/[identifier]",
  "jurisdiction": [
    {
      "coding": [
        {
          "code": "US",
          "system": "urn:iso:std:iso:3166"
        }
      ]
    }
  ],
  "fhirVersion": "4.0.1",
  "mapping": [
    {
      "identity": "rim",
      "uri": "http://hl7.org/v3",
      "name": "RIM Mapping"
    },
    {
      "identity": "w5",
      "uri": "http://hl7.org/fhir/fivews",
      "name": "FiveWs Pattern Mapping"
    }
  ],
  "kind": "resource",
  "abstract": false,
  "type": "Subscription",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Subscription",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Subscription.extension",
        "path": "Subscription.extension",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "url"
            }
          ],
          "ordered": false,
          "rules": "open"
        },
        "min": 1
      },
      {
        "id": "Subscription.extension:ceqPushExtension",
        "path": "Subscription.extension",
        "sliceName": "ceqPushExtension",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://sequoiaproject.org/fhir/sphd-r4/StructureDefinition/CEQextension"
            ]
          }
        ]
      },
      {
        "id": "Subscription.extension:ceqPushExtension.extension:eventCode",
        "path": "Subscription.extension.extension",
        "sliceName": "eventCode"
      },
      {
        "id": "Subscription.extension:ceqPushExtension.extension:eventCode.valueCoding",
        "path": "Subscription.extension.extension.valueCoding",
        "min": 0,
        "max": "1",
        "binding": {
          "strength": "required",
          "valueSet": "https://sequoiaproject.org/fhir/sphd-r4/ValueSet/CEQPushEventCodes"
        }
      },
      {
        "id": "Subscription.extension:ceqPushExtension.extension:subPurpose",
        "path": "Subscription.extension.extension",
        "sliceName": "subPurpose"
      },
      {
        "id": "Subscription.extension:ceqPushExtension.extension:subPurpose.valueCoding",
        "path": "Subscription.extension.extension.valueCoding",
        "min": 0,
        "max": "1",
        "binding": {
          "strength": "extensible",
          "valueSet": "https://sequoiaproject.org/fhir/sphd-r4/ValueSet/CEQSubscriberPurposeofUse"
        }
      },
      {
        "id": "Subscription.criteria",
        "path": "Subscription.criteria",
        "fixedString": "carequality"
      },
      {
        "id": "Subscription.channel.type",
        "path": "Subscription.channel.type",
        "fixedCode": "rest-hook"
      }
    ]
  }
}
